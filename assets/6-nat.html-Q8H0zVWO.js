import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as e,c as n,b as a}from"./app-CZxvM7_o.js";const i={},o=a('<h2 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍"><span>介绍</span></a></h2><p>网络地址转换协议 (Network Address Translation, NAT) 主要用于广域网的 IP 地址和局域网的 IP 地址之间互相转换。</p><details class="hint-container details"><summary>详情</summary><p>家用路由器拥有一个广域网的 IP 地址，而其他连接到路由器的设备都是共用这个广域网的 IP 地址，这时候就需要使用 NAT 协议进行转换。</p></details><div class="hint-container important"><p class="hint-container-title">私有网段</p><table><thead><tr><th>网络类型</th><th>范围</th></tr></thead><tbody><tr><td>A类</td><td>10.0.0.0～10.255.255.255</td></tr><tr><td>B类</td><td>172.16.0.0～172.31.255.255</td></tr><tr><td>C类</td><td>192.168.0.0～192.168.255.255</td></tr></tbody></table><p>这三类网段为私有网段，用于内部局域网使用。</p></div><h2 id="工作原理" tabindex="-1"><a class="header-anchor" href="#工作原理"><span>工作原理</span></a></h2><img src="https://www.plantuml.com/plantuml/svg/SoWkIImgAStDuShBJqbLUB5z_VCf6v_EN07XFjcn-zcSNOx872TaZZE4ysnExzEkXI1TG7v9ga9EQbg9GduQJBkLWg6baPwXcOMUgO6U4JObJYXAZB4fSKPHOeAg1EviAuMdRQtFzqv4Lckey7J9DB2OeR6UeI5GtD0GY0rGZO3x0MYFCL0T0dDnGVsXeAkB541GbsCJT4OLXBD0meYmSaZDIm46F000" alt=""><p>如上图所示，如果主机 A 向服务器发送数据包时，路由器会将来源 ip <code>192.168.50.2</code> 转换为 <code>113.112.111.110</code>, 然后发送给服务器 <code>133.133.133.133</code> 的 80 端口。当服务器返回数据时，又需要将目标地址转换为内网地址。</p><div class="hint-container info"><p class="hint-container-title">转换过程</p><ul><li>在主机A发送请求数据包时会随机分配一个端口号如 <code>8888</code> 给请求，即请求来源为 <code>192.168.50.2:8888</code></li><li>请求到达路由器后路由器又会指派一个端口给该请求，如 <code>9999</code>, 且将请求的来源 IP 地址改为 <code>113.112.111.110</code>, 最终请求来源地址为 <code>113.112.111.110:9999</code>, 路由器会保存该映射到 <strong>NAT转换表</strong> : <code>192.168.50.2:8888 -- 113.112.111.110:9999</code> 。</li><li>服务器返回数据的数据包目标地址为 <code>113.112.111.110:9999</code>， 当数据包到达路由器时，路由器会根据转换表中的记录将请求目标地址转换为 <code>192.168.50.2:8888</code> ，将数据包发送到内网主机。</li></ul></div><h2 id="nat-的优点" tabindex="-1"><a class="header-anchor" href="#nat-的优点"><span>NAT 的优点</span></a></h2><ul><li>内网安全： NAT协议将内网所有网络设备共享统一的 IP 地址，避免内网主机直接暴露在公网，能提高内网主机的安全性。</li><li>负载均衡： NAT协议可以将外部请求重定向到内部不同的主机，实现复制均衡。</li><li>节约 IP 地址： 我们知道 IPV4 的地址是有限的，NAT 协议使得大量内网设备可以联网，大大减轻了 IPV4 地址不足导致的问题。</li></ul><h2 id="nat-的缺点" tabindex="-1"><a class="header-anchor" href="#nat-的缺点"><span>NAT 的缺点</span></a></h2><ul><li>内部屏蔽： 外部服务器无法直接访问内网设备</li><li>性能损耗： 路由器维护 NAT 转换表有性能损耗</li><li>链接丢失： 若路由器重启会导致所有 TCP 连接断开</li></ul><div class="hint-container warning"><p class="hint-container-title">解决方法</p><p>IPV6 协议的出现可以弥补 NAT 的缺点，是未来的主要应用。</p></div>',13),r=[o];function d(l,c){return e(),n("div",null,r)}const h=t(i,[["render",d],["__file","6-nat.html.vue"]]),m=JSON.parse('{"path":"/guide/concepts/network/6-nat.html","title":"NAT","lang":"zh-CN","frontmatter":{"order":6,"title":"NAT","description":"介绍 网络地址转换协议 (Network Address Translation, NAT) 主要用于广域网的 IP 地址和局域网的 IP 地址之间互相转换。 详情 家用路由器拥有一个广域网的 IP 地址，而其他连接到路由器的设备都是共用这个广域网的 IP 地址，这时候就需要使用 NAT 协议进行转换。 私有网段 这三类网段为私有网段，用于内部局域网使...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://goguide.ryansu.tech/en/guide/concepts/network/6-nat.html"}],["meta",{"property":"og:url","content":"https://goguide.ryansu.tech/guide/concepts/network/6-nat.html"}],["meta",{"property":"og:site_name","content":"Go 面试宝典"}],["meta",{"property":"og:title","content":"NAT"}],["meta",{"property":"og:description","content":"介绍 网络地址转换协议 (Network Address Translation, NAT) 主要用于广域网的 IP 地址和局域网的 IP 地址之间互相转换。 详情 家用路由器拥有一个广域网的 IP 地址，而其他连接到路由器的设备都是共用这个广域网的 IP 地址，这时候就需要使用 NAT 协议进行转换。 私有网段 这三类网段为私有网段，用于内部局域网使..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-04-25T07:28:57.000Z"}],["meta",{"property":"article:author","content":"Go Guide"}],["meta",{"property":"article:modified_time","content":"2024-04-25T07:28:57.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NAT\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-25T07:28:57.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Go Guide\\",\\"url\\":\\"https://github.com/suyuan32\\"}]}"]]},"headers":[{"level":2,"title":"介绍","slug":"介绍","link":"#介绍","children":[]},{"level":2,"title":"工作原理","slug":"工作原理","link":"#工作原理","children":[]},{"level":2,"title":"NAT 的优点","slug":"nat-的优点","link":"#nat-的优点","children":[]},{"level":2,"title":"NAT 的缺点","slug":"nat-的缺点","link":"#nat-的缺点","children":[]}],"git":{"createdTime":1714030137000,"updatedTime":1714030137000,"contributors":[{"name":"Ryan Su","email":"yuansu.china.work@gmail.com","commits":1}]},"readingTime":{"minutes":2.3,"words":691},"filePathRelative":"guide/concepts/network/6-nat.md","localizedDate":"2024年4月25日","autoDesc":true,"excerpt":"<h2>介绍</h2>\\n<p>网络地址转换协议 (Network Address Translation, NAT) 主要用于广域网的 IP 地址和局域网的 IP 地址之间互相转换。</p>\\n<details class=\\"hint-container details\\"><summary>详情</summary>\\n<p>家用路由器拥有一个广域网的 IP 地址，而其他连接到路由器的设备都是共用这个广域网的 IP 地址，这时候就需要使用 NAT 协议进行转换。</p>\\n</details>\\n<div class=\\"hint-container important\\">\\n<p class=\\"hint-container-title\\">私有网段</p>\\n<table>\\n<thead>\\n<tr>\\n<th>网络类型</th>\\n<th>范围</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>A类</td>\\n<td>10.0.0.0～10.255.255.255</td>\\n</tr>\\n<tr>\\n<td>B类</td>\\n<td>172.16.0.0～172.31.255.255</td>\\n</tr>\\n<tr>\\n<td>C类</td>\\n<td>192.168.0.0～192.168.255.255</td>\\n</tr>\\n</tbody>\\n</table>\\n<p>这三类网段为私有网段，用于内部局域网使用。</p>\\n</div>"}');export{h as comp,m as data};
