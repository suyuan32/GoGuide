import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,o as t,d as n}from"./app-Du-TCu9s.js";const r={},s=n(`<h3 id="have-you-used-context-what-are-the-use-cases-for-context" tabindex="-1"><a class="header-anchor" href="#have-you-used-context-what-are-the-use-cases-for-context"><span>Have you used <code>context</code>? What are the use cases for <code>context</code>?</span></a></h3><details class="hint-container details"><summary>Answer</summary><table><thead><tr><th>Scenario</th><th>Introduction</th></tr></thead><tbody><tr><td>Timeout handling</td><td>By using <code>context</code>, you can easily set a timeout, and the coroutine will automatically terminate after the timeout</td></tr><tr><td>Terminate coroutine</td><td>By using the <code>cancel()</code> method, coroutines can be easily terminated</td></tr><tr><td>Data transfer</td><td>We can write data into <code>context</code> to transfer data between different coroutines</td></tr></tbody></table></details><h3 id="is-channel-thread-safe" tabindex="-1"><a class="header-anchor" href="#is-channel-thread-safe"><span>Is <code>channel</code> thread-safe?</span></a></h3><details class="hint-container details"><summary>Answer</summary><p><code>channel</code> is thread-safe, the reason is that <code>channel</code> has implemented a lock mechanism internally,</p></details><h2 id="map" tabindex="-1"><a class="header-anchor" href="#map"><span>Map</span></a></h2><h3 id="is-the-traversal-of-a-map-using-range-ordered-or-unordered" tabindex="-1"><a class="header-anchor" href="#is-the-traversal-of-a-map-using-range-ordered-or-unordered"><span>Is the traversal of a Map using range ordered or unordered?</span></a></h3><details class="hint-container details"><summary>Answer</summary><p><strong>Unordered</strong></p><p>Internally, Map uses a hash algorithm to place elements. When it automatically expands, it recalculates the hash values, so the addresses of the elements keep changing. To prevent users from thinking that the arrangement of Map elements is ordered, it directly returns in a random order, so the traversal is unordered.</p></details><h3 id="is-map-concurrency-safe" tabindex="-1"><a class="header-anchor" href="#is-map-concurrency-safe"><span>Is Map concurrency-safe?</span></a></h3><details class="hint-container details"><summary>Answer</summary><p><strong>Map cannot guarantee concurrency safety</strong></p><p>To ensure concurrency safety, use the following methods:</p><ul><li>Manually add read-write locks</li><li>Use <code>sync.Map</code></li></ul></details><h3 id="will-the-memory-of-a-key-be-released-after-the-key-is-deleted-from-the-map" tabindex="-1"><a class="header-anchor" href="#will-the-memory-of-a-key-be-released-after-the-key-is-deleted-from-the-map"><span>Will the memory of a key be released after the key is deleted from the Map?</span></a></h3><details class="hint-container details"><summary>Answer</summary><p>If the value of the map is</p><ul><li><strong>Value type</strong> (<code>int</code> <code>uint</code> <code>float32</code> <code>string</code> <code>struct{}</code>...), then the value will not be garbage collected after the key is deleted</li><li><strong>Reference type</strong> (<code>map</code> <code>slices</code> <code>chan</code> ...), then the value will be garbage collected after the key is deleted</li></ul><blockquote><p>If we want to force garbage collection, how do we operate?</p></blockquote><ul><li>Set the map to nil</li><li>Place the values that need to be retained in a new map and assign it to the current map</li></ul><div class="hint-container tip"><p class="hint-container-title">Exclusive for members</p><p><a href="https://articles.zsxq.com/id_4w1a11i6xrw0.html" target="_blank" rel="noopener noreferrer">Code combat analysis</a></p></div></details><h3 id="can-a-panic-caused-by-a-map-be-recovered" tabindex="-1"><a class="header-anchor" href="#can-a-panic-caused-by-a-map-be-recovered"><span>Can a panic caused by a map be recovered?</span></a></h3><details class="hint-container details"><summary>Answer</summary><p>A panic caused by concurrent read and write operations on a map cannot be recovered. This is because map-related panics are thrown using <code>runtime.throw()</code>, which cannot be recovered.</p><div class="language-go line-numbers-mode" data-ext="go" data-title="go"><pre class="language-go"><code><span class="token keyword">if</span> h<span class="token punctuation">.</span>flags<span class="token operator">&amp;</span>hashWriting <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
  <span class="token function">throw</span><span class="token punctuation">(</span><span class="token string">&quot;concurrent map read and map write&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,13),o=[s];function i(c,d){return t(),a("div",null,o)}const u=e(r,[["render",i],["__file","2-medium.html.vue"]]),m=JSON.parse('{"path":"/en/guide/interview/golang/basic/2-medium.html","title":"Medium","lang":"en-US","frontmatter":{"order":2,"title":"Medium","icon":"line-md:sunny-filled-loop-to-moon-filled-loop-transition","head":[["meta",{"name":"keywords","content":"golang, medium, interview, interview questions"}],["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://goguide.ryansu.tech/guide/interview/golang/basic/2-medium.html"}],["meta",{"property":"og:url","content":"https://goguide.ryansu.tech/en/guide/interview/golang/basic/2-medium.html"}],["meta",{"property":"og:site_name","content":"Go Guide"}],["meta",{"property":"og:title","content":"Medium"}],["meta",{"property":"og:description","content":"Have you used context? What are the use cases for context? Answer Is channel thread-safe? Answer channel is thread-safe, the reason is that channel has implemented a lock mechan..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-05-22T00:56:38.000Z"}],["meta",{"property":"article:author","content":"Go Guide"}],["meta",{"property":"article:modified_time","content":"2024-05-22T00:56:38.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Medium\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-05-22T00:56:38.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Go Guide\\",\\"url\\":\\"https://github.com/suyuan32\\"}]}"]],"description":"Have you used context? What are the use cases for context? Answer Is channel thread-safe? Answer channel is thread-safe, the reason is that channel has implemented a lock mechan..."},"headers":[{"level":3,"title":"Have you used context? What are the use cases for context?","slug":"have-you-used-context-what-are-the-use-cases-for-context","link":"#have-you-used-context-what-are-the-use-cases-for-context","children":[]},{"level":3,"title":"Is channel thread-safe?","slug":"is-channel-thread-safe","link":"#is-channel-thread-safe","children":[]},{"level":2,"title":"Map","slug":"map","link":"#map","children":[{"level":3,"title":"Is the traversal of a Map using range ordered or unordered?","slug":"is-the-traversal-of-a-map-using-range-ordered-or-unordered","link":"#is-the-traversal-of-a-map-using-range-ordered-or-unordered","children":[]},{"level":3,"title":"Is Map concurrency-safe?","slug":"is-map-concurrency-safe","link":"#is-map-concurrency-safe","children":[]},{"level":3,"title":"Will the memory of a key be released after the key is deleted from the Map?","slug":"will-the-memory-of-a-key-be-released-after-the-key-is-deleted-from-the-map","link":"#will-the-memory-of-a-key-be-released-after-the-key-is-deleted-from-the-map","children":[]},{"level":3,"title":"Can a panic caused by a map be recovered?","slug":"can-a-panic-caused-by-a-map-be-recovered","link":"#can-a-panic-caused-by-a-map-be-recovered","children":[]}]}],"git":{"createdTime":1705721989000,"updatedTime":1716339398000,"contributors":[{"name":"Ryan Su","email":"yuansu.china.work@gmail.com","commits":7}]},"readingTime":{"minutes":1.2,"words":359},"filePathRelative":"en/guide/interview/golang/basic/2-medium.md","localizedDate":"January 20, 2024","autoDesc":true,"excerpt":"<h3>Have you used <code>context</code>? What are the use cases for <code>context</code>?</h3>\\n<details class=\\"hint-container details\\"><summary>Answer</summary>\\n<table>\\n<thead>\\n<tr>\\n<th>Scenario</th>\\n<th>Introduction</th>\\n</tr>\\n</thead>\\n<tbody>\\n<tr>\\n<td>Timeout handling</td>\\n<td>By using <code>context</code>, you can easily set a timeout, and the coroutine will automatically terminate after the timeout</td>\\n</tr>\\n<tr>\\n<td>Terminate coroutine</td>\\n<td>By using the <code>cancel()</code> method, coroutines can be easily terminated</td>\\n</tr>\\n<tr>\\n<td>Data transfer</td>\\n<td>We can write data into <code>context</code> to transfer data between different coroutines</td>\\n</tr>\\n</tbody>\\n</table>\\n</details>"}');export{u as comp,m as data};
